import{_ as a,o as i,c as n,ae as e}from"./chunks/framework.Dn7Y7LSn.js";const c=JSON.parse('{"title":"部署故障排除指南","description":"","frontmatter":{},"headers":[],"relativePath":"troubleshooting.md","filePath":"troubleshooting.md"}'),t={name:"troubleshooting.md"};function l(p,s,h,o,k,d){return i(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="部署故障排除指南" tabindex="-1">部署故障排除指南 <a class="header-anchor" href="#部署故障排除指南" aria-label="Permalink to &quot;部署故障排除指南&quot;">​</a></h1><h2 id="常见问题及解决方案" tabindex="-1">常见问题及解决方案 <a class="header-anchor" href="#常见问题及解决方案" aria-label="Permalink to &quot;常见问题及解决方案&quot;">​</a></h2><h3 id="_1-package-lock-json-相关问题" tabindex="-1">1. package-lock.json 相关问题 <a class="header-anchor" href="#_1-package-lock-json-相关问题" aria-label="Permalink to &quot;1. package-lock.json 相关问题&quot;">​</a></h3><p><strong>错误信息：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>if [ ! -f &quot;package-lock.json&quot; ]; then</span></span>
<span class="line"><span>❌ package-lock.json not found!</span></span>
<span class="line"><span>Error: Process completed with exit code 1.</span></span></code></pre></div><p><strong>解决方案：</strong></p><ol><li>确保 [package-lock.json](file://d:\\code\\python\\DesktopPetByAiNew\\DesktopPet的文档\\DesktopByAi-Document\\package-lock.json) 文件存在于项目根目录</li><li>检查该文件是否已被提交到 git 仓库</li><li>使用我们提供的简化版部署配置文件</li></ol><p><strong>验证步骤：</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查文件是否存在</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -la</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-lock.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 git 状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果文件未跟踪，添加它</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-lock.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Add package-lock.json&quot;</span></span></code></pre></div><h3 id="_2-node-js-版本问题" tabindex="-1">2. Node.js 版本问题 <a class="header-anchor" href="#_2-node-js-版本问题" aria-label="Permalink to &quot;2. Node.js 版本问题&quot;">​</a></h3><p><strong>错误信息：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: The engine &quot;node&quot; is incompatible with this module</span></span></code></pre></div><p><strong>解决方案：</strong> 在 GitHub Actions 配置中指定合适的 Node.js 版本：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Setup Node</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span></span></code></pre></div><h3 id="_3-依赖安装失败" tabindex="-1">3. 依赖安装失败 <a class="header-anchor" href="#_3-依赖安装失败" aria-label="Permalink to &quot;3. 依赖安装失败&quot;">​</a></h3><p><strong>错误信息：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm ERR! Cannot read property &#39;match&#39; of undefined</span></span></code></pre></div><p><strong>解决方案：</strong> 使用 <code>npm ci</code> 而不是 <code>npm install</code>：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm ci</span></span></code></pre></div><h3 id="_4-构建路径问题" tabindex="-1">4. 构建路径问题 <a class="header-anchor" href="#_4-构建路径问题" aria-label="Permalink to &quot;4. 构建路径问题&quot;">​</a></h3><p><strong>错误信息：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: ENOENT: no such file or directory</span></span></code></pre></div><p><strong>解决方案：</strong> 确保构建输出路径正确：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Upload artifact</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/upload-pages-artifact@v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./docs/.vitepress/dist</span></span></code></pre></div><h3 id="_5-权限问题" tabindex="-1">5. 权限问题 <a class="header-anchor" href="#_5-权限问题" aria-label="Permalink to &quot;5. 权限问题&quot;">​</a></h3><p><strong>错误信息：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: Resource not accessible by integration</span></span></code></pre></div><p><strong>解决方案：</strong> 在 GitHub 仓库设置中配置正确的权限：</p><ul><li>Settings → Actions → General → Workflow permissions</li><li>选择 &quot;Read and write permissions&quot;</li></ul><h2 id="部署前检查清单" tabindex="-1">部署前检查清单 <a class="header-anchor" href="#部署前检查清单" aria-label="Permalink to &quot;部署前检查清单&quot;">​</a></h2><ul><li>[ ] [package.json](file://d:\\code\\python\\DesktopPetByAiNew\\DesktopPet的文档\\DesktopByAi-Document\\package.json) 和 [package-lock.json](file://d:\\code\\python\\DesktopPetByAiNew\\DesktopPet的文档\\DesktopByAi-Document\\package-lock.json) 文件存在</li><li>[ ] 所有依赖已正确安装（本地测试 <code>npm run docs:build</code>）</li><li>[ ] GitHub Actions 配置文件语法正确</li><li>[ ] GitHub Pages 在仓库设置中已启用</li><li>[ ] 使用的分支是 <code>main</code>（或配置中指定的分支）</li><li>[ ] 必要的环境变量已配置</li></ul><h2 id="本地测试部署" tabindex="-1">本地测试部署 <a class="header-anchor" href="#本地测试部署" aria-label="Permalink to &quot;本地测试部署&quot;">​</a></h2><p>在推送代码前，建议先在本地测试整个流程：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 清理之前的构建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs/.vitepress/dist</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 安装依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ci</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 构建项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. 预览构建结果</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs:preview</span></span></code></pre></div><h2 id="获取帮助" tabindex="-1">获取帮助 <a class="header-anchor" href="#获取帮助" aria-label="Permalink to &quot;获取帮助&quot;">​</a></h2><p>如果问题仍然存在：</p><ol><li>查看完整的 GitHub Actions 日志</li><li>检查 VitePress 官方文档</li><li>在项目 Issues 中提交问题描述</li></ol>`,37)])])}const g=a(t,[["render",l]]);export{c as __pageData,g as default};
